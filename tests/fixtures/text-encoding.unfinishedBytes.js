const u = (...args) => Uint8Array.of(...args)

const fixture = [
  ['utf-8', 0, u()],
  ['utf-8', 0, u(0x00)],
  ['utf-8', 0, u(0x00, 0x00)],

  ['utf-8', 1, u(0xdf)],
  ['utf-8', 1, u(0x27, 0xdf)],
  ['utf-8', 1, u(0x17, 0x27, 0xdf)],

  ['utf-8', 0, u(0x80)],
  ['utf-8', 0, u(0x80, 0x80)],
  ['utf-8', 0, u(0x80, 0x80, 0x80)],
  ['utf-8', 0, u(0x80, 0x80, 0x80, 0x80)],

  ['utf-8', 0, u(0xbf)],
  ['utf-8', 0, u(0xbf, 0xbf)],
  ['utf-8', 0, u(0xbf, 0xbf, 0xbf)],
  ['utf-8', 0, u(0xbf, 0xbf, 0xbf, 0xbf)],
  ['utf-8', 0, u(0xbf, 0x80)],
  ['utf-8', 0, u(0xbf, 0x80, 0x80)],
  ['utf-8', 0, u(0xbf, 0x80, 0x80, 0x80)],

  ['utf-8', 0, u(0xc0)],
  ['utf-8', 0, u(0xc0, 0xc0)],
  ['utf-8', 0, u(0xc0, 0xc0, 0xc0)],
  ['utf-8', 0, u(0xc0, 0xc0, 0xc0, 0xc0)],
  ['utf-8', 0, u(0xc0, 0x80)],
  ['utf-8', 0, u(0xc0, 0x80, 0x80)],
  ['utf-8', 0, u(0xc0, 0x80, 0x80, 0x80)],

  ['utf-8', 0, u(0xc1)],
  ['utf-8', 0, u(0xc1, 0xc1)],
  ['utf-8', 0, u(0xc1, 0xc1, 0xc1)],
  ['utf-8', 0, u(0xc1, 0xc1, 0xc1, 0xc1)],
  ['utf-8', 0, u(0xc1, 0x80)],
  ['utf-8', 0, u(0xc1, 0x80, 0x80)],
  ['utf-8', 0, u(0xc1, 0x80, 0x80, 0x80)],

  ['utf-8', 1, u(0xd0)],
  ['utf-8', 1, u(0xd0, 0xd0)],
  ['utf-8', 1, u(0xd0, 0xd0, 0xd0)],

  ['utf-8', 1, u(0xc2)],
  ['utf-8', 0, u(0xc2, 0x80)],
  ['utf-8', 1, u(0xdf)],
  ['utf-8', 0, u(0xdf, 0x80)],

  ['utf-8', 1, u(0xe0)],
  ['utf-8', 0, u(0xe0, 0x80)], // low
  ['utf-8', 0, u(0xe0, 0x9f)], // low
  ['utf-8', 2, u(0xe0, 0xa0)],
  ['utf-8', 2, u(0xe0, 0xbd)],
  ['utf-8', 2, u(0xe0, 0xbf)],
  ['utf-8', 0, u(0xe0, 0xc0)], // out
  ['utf-8', 0, u(0xe0, 0x80, 0x80)],
  ['utf-8', 0, u(0xe0, 0x9f, 0x80)],
  ['utf-8', 0, u(0xe0, 0xa0, 0x80)],
  ['utf-8', 0, u(0xe0, 0xbd, 0x80)],
  ['utf-8', 0, u(0xe0, 0xbf, 0x80)],
  ['utf-8', 0, u(0xe0, 0xc0, 0x80)],

  ['utf-8', 1, u(0xe1)],
  ['utf-8', 2, u(0xe1, 0x80)],
  ['utf-8', 2, u(0xe1, 0x9f)],
  ['utf-8', 2, u(0xe1, 0xa0)],
  ['utf-8', 2, u(0xe1, 0xbd)],
  ['utf-8', 2, u(0xe1, 0xbf)],
  ['utf-8', 0, u(0xe1, 0xc0)], // out
  ['utf-8', 0, u(0xe1, 0x80, 0x80)],
  ['utf-8', 0, u(0xe1, 0x9f, 0x80)],
  ['utf-8', 0, u(0xe1, 0xa0, 0x80)],
  ['utf-8', 0, u(0xe1, 0xbd, 0x80)],
  ['utf-8', 0, u(0xe1, 0xbf, 0x80)],
  ['utf-8', 0, u(0xe1, 0xc0, 0x80)],

  ['utf-8', 1, u(0xeb)],
  ['utf-8', 2, u(0xeb, 0x80)],
  ['utf-8', 2, u(0xeb, 0x9f)],
  ['utf-8', 2, u(0xeb, 0xa0)],
  ['utf-8', 2, u(0xeb, 0xbd)],
  ['utf-8', 2, u(0xeb, 0xbf)],
  ['utf-8', 0, u(0xeb, 0xc0)], // out
  ['utf-8', 0, u(0xeb, 0x80, 0x80)],
  ['utf-8', 0, u(0xeb, 0x9f, 0x80)],
  ['utf-8', 0, u(0xeb, 0xa0, 0x80)],
  ['utf-8', 0, u(0xeb, 0xbd, 0x80)],
  ['utf-8', 0, u(0xeb, 0xbf, 0x80)],
  ['utf-8', 0, u(0xeb, 0xc0, 0x80)],

  ['utf-8', 1, u(0xec)],
  ['utf-8', 2, u(0xec, 0x80)],
  ['utf-8', 2, u(0xec, 0x9f)],
  ['utf-8', 2, u(0xec, 0xa0)],
  ['utf-8', 2, u(0xec, 0xbd)],
  ['utf-8', 2, u(0xec, 0xbf)],
  ['utf-8', 0, u(0xec, 0xc0)], // out
  ['utf-8', 0, u(0xec, 0x80, 0x80)],
  ['utf-8', 0, u(0xec, 0x9f, 0x80)],
  ['utf-8', 0, u(0xec, 0xa0, 0x80)],
  ['utf-8', 0, u(0xec, 0xbd, 0x80)],
  ['utf-8', 0, u(0xec, 0xbf, 0x80)],
  ['utf-8', 0, u(0xec, 0xc0, 0x80)],

  ['utf-8', 1, u(0xed)],
  ['utf-8', 2, u(0xed, 0x80)],
  ['utf-8', 2, u(0xed, 0x9f)],
  ['utf-8', 0, u(0xed, 0xa0)], // high
  ['utf-8', 0, u(0xed, 0xbd)], // high
  ['utf-8', 0, u(0xed, 0xbf)], // high
  ['utf-8', 0, u(0xed, 0xc0)], // out
  ['utf-8', 0, u(0xed, 0x80, 0x80)],
  ['utf-8', 0, u(0xed, 0x9f, 0x80)],
  ['utf-8', 0, u(0xed, 0xa0, 0x80)],
  ['utf-8', 0, u(0xed, 0xbd, 0x80)],
  ['utf-8', 0, u(0xed, 0xbf, 0x80)],
  ['utf-8', 0, u(0xed, 0xc0, 0x80)],

  ['utf-8', 1, u(0xee)],
  ['utf-8', 2, u(0xee, 0x80)],
  ['utf-8', 2, u(0xee, 0x9f)],
  ['utf-8', 2, u(0xee, 0xa0)],
  ['utf-8', 2, u(0xee, 0xbd)],
  ['utf-8', 2, u(0xee, 0xbf)],
  ['utf-8', 0, u(0xee, 0xc0)], // out
  ['utf-8', 0, u(0xee, 0x80, 0x80)],
  ['utf-8', 0, u(0xee, 0x9f, 0x80)],
  ['utf-8', 0, u(0xee, 0xa0, 0x80)],
  ['utf-8', 0, u(0xee, 0xbd, 0x80)],
  ['utf-8', 0, u(0xee, 0xbf, 0x80)],
  ['utf-8', 0, u(0xee, 0xc0, 0x80)],

  ['utf-8', 1, u(0xef)],
  ['utf-8', 2, u(0xef, 0x80)],
  ['utf-8', 2, u(0xef, 0x9f)],
  ['utf-8', 2, u(0xef, 0xa0)],
  ['utf-8', 2, u(0xef, 0xbd)],
  ['utf-8', 2, u(0xef, 0xbf)],
  ['utf-8', 0, u(0xef, 0xc0)], // out
  ['utf-8', 0, u(0xef, 0x80, 0x80)],
  ['utf-8', 0, u(0xef, 0x9f, 0x80)],
  ['utf-8', 0, u(0xef, 0xa0, 0x80)],
  ['utf-8', 0, u(0xef, 0xbd, 0x80)],
  ['utf-8', 0, u(0xef, 0xbf, 0x80)],
  ['utf-8', 0, u(0xef, 0xc0, 0x80)],

  ['utf-8', 1, u(0xf0)],
  ['utf-8', 0, u(0xf0, 0x80)], // low
  ['utf-8', 0, u(0xf0, 0x8f)], // low
  ['utf-8', 2, u(0xf0, 0x90)],
  ['utf-8', 2, u(0xf0, 0xbf)],
  ['utf-8', 0, u(0xf0, 0xc0)], // out
  ['utf-8', 0, u(0xf0, 0x80, 0x80)], // low
  ['utf-8', 0, u(0xf0, 0x8f, 0x80)], // low
  ['utf-8', 3, u(0xf0, 0x90, 0x80)],
  ['utf-8', 3, u(0xf0, 0xbf, 0x80)],
  ['utf-8', 0, u(0xf0, 0xc0, 0x80)], // out
  ['utf-8', 0, u(0xf0, 0x80, 0x80, 0x80)],
  ['utf-8', 0, u(0xf0, 0x8f, 0x80, 0x80)],
  ['utf-8', 0, u(0xf0, 0x90, 0x80, 0x80)],
  ['utf-8', 0, u(0xf0, 0xbf, 0x80, 0x80)],
  ['utf-8', 0, u(0xf0, 0xc0, 0x80, 0x80)],

  ['utf-8', 1, u(0xf1)],
  ['utf-8', 2, u(0xf1, 0x80)],
  ['utf-8', 2, u(0xf1, 0x8f)],
  ['utf-8', 2, u(0xf1, 0x90)],
  ['utf-8', 2, u(0xf1, 0xbf)],
  ['utf-8', 0, u(0xf1, 0xc0)], // out
  ['utf-8', 3, u(0xf1, 0x80, 0x80)],
  ['utf-8', 3, u(0xf1, 0x8f, 0x80)],
  ['utf-8', 3, u(0xf1, 0x90, 0x80)],
  ['utf-8', 3, u(0xf1, 0xbf, 0x80)],
  ['utf-8', 0, u(0xf1, 0xc0, 0x80)], // out
  ['utf-8', 0, u(0xf1, 0x80, 0x80, 0x80)],
  ['utf-8', 0, u(0xf1, 0x8f, 0x80, 0x80)],
  ['utf-8', 0, u(0xf1, 0x90, 0x80, 0x80)],
  ['utf-8', 0, u(0xf1, 0xbf, 0x80, 0x80)],
  ['utf-8', 0, u(0xf1, 0xc0, 0x80, 0x80)],

  ['utf-8', 1, u(0xf3)],
  ['utf-8', 2, u(0xf3, 0x80)],
  ['utf-8', 2, u(0xf3, 0x8f)],
  ['utf-8', 2, u(0xf3, 0x90)],
  ['utf-8', 2, u(0xf3, 0xbf)],
  ['utf-8', 0, u(0xf3, 0xc0)],
  ['utf-8', 3, u(0xf3, 0x80, 0x80)],
  ['utf-8', 3, u(0xf3, 0x8f, 0x80)],
  ['utf-8', 3, u(0xf3, 0x90, 0x80)],
  ['utf-8', 3, u(0xf3, 0xbf, 0x80)],
  ['utf-8', 0, u(0xf3, 0xc0, 0x80)],
  ['utf-8', 0, u(0xf3, 0x80, 0x80, 0x80)],
  ['utf-8', 0, u(0xf3, 0x8f, 0x80, 0x80)],
  ['utf-8', 0, u(0xf3, 0x90, 0x80, 0x80)],
  ['utf-8', 0, u(0xf3, 0xbf, 0x80, 0x80)],
  ['utf-8', 0, u(0xf3, 0xc0, 0x80, 0x80)],

  ['utf-8', 1, u(0xf4)],
  ['utf-8', 2, u(0xf4, 0x80)],
  ['utf-8', 2, u(0xf4, 0x8f)],
  ['utf-8', 0, u(0xf4, 0x90)], // high
  ['utf-8', 0, u(0xf4, 0xbf)], // high
  ['utf-8', 0, u(0xf4, 0xc0)], // out
  ['utf-8', 3, u(0xf4, 0x80, 0x80)],
  ['utf-8', 3, u(0xf4, 0x8f, 0x80)],
  ['utf-8', 0, u(0xf4, 0x90, 0x80)], // high
  ['utf-8', 0, u(0xf4, 0xbf, 0x80)], // high
  ['utf-8', 0, u(0xf4, 0xc0, 0x80)], // out
  ['utf-8', 0, u(0xf4, 0x80, 0x80, 0x80)],
  ['utf-8', 0, u(0xf4, 0x8f, 0x80, 0x80)],
  ['utf-8', 0, u(0xf4, 0x90, 0x80, 0x80)],
  ['utf-8', 0, u(0xf4, 0xbf, 0x80, 0x80)],
  ['utf-8', 0, u(0xf4, 0xc0, 0x80, 0x80)],

  ['utf-8', 0, u(0xf5)],
  ['utf-8', 0, u(0xf5, 0xf5)],
  ['utf-8', 0, u(0xf5, 0xf5, 0xf5)],
  ['utf-8', 0, u(0xf5, 0xf5, 0xf5, 0xf5)],
  ['utf-8', 0, u(0xf5, 0x80)],
  ['utf-8', 0, u(0xf5, 0x80, 0x80)],
  ['utf-8', 0, u(0xf5, 0x80, 0x80, 0x80)],

  ['utf-8', 0, u(0xf6)],
  ['utf-8', 0, u(0xff)],

  ['utf-16le', 0, u()],
  ['utf-16le', 1, u(0x00)],
  ['utf-16le', 0, u(0x00, 0x00)],
  ['utf-16le', 1, u(0x00, 0x00, 0x00)],

  ['utf-16le', 2, u(0x00, 0xda)],
  ['utf-16le', 0, u(0xda, 0x00)],
  ['utf-16le', 3, u(0x00, 0xda, 0x00)],
  ['utf-16le', 1, u(0xda, 0x00, 0x00)],
  ['utf-16le', 1, u(0xda, 0x00, 0xdc)],

  ['utf-16be', 0, u()],
  ['utf-16be', 1, u(0x00)],
  ['utf-16be', 0, u(0x00, 0x00)],
  ['utf-16be', 1, u(0x00, 0x00, 0x00)],

  ['utf-16be', 2, u(0xda, 0x00)],
  ['utf-16be', 0, u(0x00, 0xda)],
  ['utf-16be', 3, u(0xda, 0x00, 0xdc)],
  ['utf-16be', 3, u(0xda, 0x00, 0x00)], // Does not bail out early: new TextDecoder('utf-16be').decode(Uint8Array.of(0xda, 0x00, 0x00), { stream: true }).length === 0
  ['utf-16be', 1, u(0x00, 0xda, 0x00)],
  ['utf-16be', 1, u(0x00, 0xda, 0xdc)],
]

// To verify:
/*
const assert = (x) => { if (!x) throw new Error('failed') }
for (const [encoding, trail, u8] of fixture) {
  try {
    const decoder = new TextDecoder(encoding)
    const a0 = decoder.decode(u8, { stream: true })
    const b0 = decoder.decode()
    const ab = new TextDecoder(encoding).decode(u8)
    const a1 = new TextDecoder(encoding).decode(u8.subarray(0, u8.length - trail))
    const b1 = new TextDecoder(encoding).decode(u8.subarray(u8.length - trail))
    assert(a0 === a1)
    assert(b0 === b1)
    assert(a0 + b0 === ab)
    assert(decoder.decode(u8) === ab) // reuse
    if (trail === 0) {
      assert(a0 === ab)
      assert(b0 === '')
    }
    if (trail === u8.length) {
      assert(a0 === '')
      assert(b0 === ab)
    }
  } catch {
    console.error(`Differs at ${encoding}: ${u8}`)
  }
}
console.log('Done')
*/

export default fixture
